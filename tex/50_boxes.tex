% ------------------------------------------------------------
% boxes.tex — professional, non-numbered theorem environments
% ------------------------------------------------------------

\RequirePackage[most]{tcolorbox}
\RequirePackage{xcolor}

\tcbuselibrary{theorems,breakable,skins}

% ------------------------------------------------------------
% Colors (muted, professional)
% ------------------------------------------------------------
\colorlet{XText}{black!90}
\colorlet{XSoft}{black!2}

% Muted versions of your colors (not grey, not too saturated)
\colorlet{ThmC}{XBlue!80!black}
\colorlet{DefC}{XTeal!80!black}
\colorlet{ExC}{XOrange!85!black}
\colorlet{NoteC}{XPurple!80!black}
\colorlet{PitC}{XGray!85!black} % or just black!70 if you prefer

% ------------------------------------------------------------
% Global box style
% ------------------------------------------------------------
\tcbset{
  enhanced,
  breakable,
  colback=white,
  coltext=XText,
  boxrule=0.35pt,
  sharp corners=south,
  arc=1.2mm,
  left=14pt,right=14pt,top=10pt,bottom=10pt,
  before skip=10pt plus 2pt minus 2pt,
  after skip=10pt plus 2pt minus 2pt,
  title style={font=\bfseries},
}

% ------------------------------------------------------------
% Base theorem style (thin frame + left rule)
% ------------------------------------------------------------
\tcbset{
  thmstyle/.style={
    colframe=#1,
    borderline west={2pt}{0pt}{#1},
    fonttitle=\bfseries\color{#1},
    attach title to upper,
  },
}

% NON-NUMBERED theorem-like boxes (robust: no star form)
\newtcbtheorem[no counter]{theorem}{Theorème}{
  thmstyle=ThmC
}{thm}

\newtcbtheorem[no counter]{lemma}{Lemme}{
  thmstyle=ThmC
}{lem}

\newtcbtheorem[no counter]{definition}{Définition}{
  thmstyle=DefC
}{def}

\newtcbtheorem[no counter]{exercise}{Exercice}{
  thmstyle=ExC
}{ex}


% ------------------------------------------------------------
% Intuition / Pitfall (light background, same visual language)
% ------------------------------------------------------------
\newtcolorbox{intuitionbox}{
  breakable,
  colback=XSoft,
  colframe=NoteC,
  borderline west={2pt}{0pt}{NoteC},
  boxrule=0.35pt,
  title=\textbf{Intuition},
  fonttitle=\bfseries\color{NoteC},
}

\newtcolorbox{pitfallbox}{
  breakable,
  colback=XSoft,
  colframe=PitC,
  borderline west={2pt}{0pt}{PitC},
  boxrule=0.35pt,
  title=\textbf{Pitfall},
  fonttitle=\bfseries\color{PitC},
}

% ------------------------------------------------------------
% Solution toggle
% ------------------------------------------------------------
\newif\ifshowsolutions
\showsolutionstrue

\newenvironment{solution}{
  \ifshowsolutions
    \begin{tcolorbox}[
      breakable,
      colback=white,
      colframe=NoteC,
      borderline west={2pt}{0pt}{NoteC},
      boxrule=0.35pt,
      title=\textbf{Solution},
      fonttitle=\bfseries\color{NoteC},
    ]
  \else
    \expandafter\comment
  \fi
}{
  \ifshowsolutions
    \end{tcolorbox}
  \else
    \endcomment
  \fi
}

\newtcolorbox{remarkbox}{
  breakable,
  colback=XSoft,
  colframe=XGray!85!black,
  borderline west={2pt}{0pt}{XGray!85!black},
  boxrule=0.35pt,
  title=\textbf{Remarque},
  fonttitle=\bfseries\color{XGray!85!black},
  left=12pt
}
